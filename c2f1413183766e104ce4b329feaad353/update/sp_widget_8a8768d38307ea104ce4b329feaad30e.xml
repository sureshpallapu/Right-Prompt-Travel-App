<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope, spUtil) {
  var c = this;

  c.submit = function() {
    c.server.update().then(function(response) {
      if (response.success) {
        c.data.success = true;
        c.data.sys_id = response.sys_id;
        c.data.error = false;
      } else {
        c.data.error = true;
        c.data.errorMessage = response.message || "Something went wrong";
        c.data.success = false;
      }
    });
  };
}
function($scope, spUtil) {
  var c = this;

  // Define the reference field for 'sys_user'
  c.callerField = {
    name: 'caller',
    mandatory: true,
    read_only: false,
    reference: 'sys_user',
    displayValue: '',
    value: ''
  };

  c.submit = function() {
    // Pass the selected caller back to server
    c.data.caller = {
      value: c.callerField.value
    };

    c.server.update().then(function(response) {
      if (response.success) {
        c.data.success = true;
        c.data.sys_id = response.sys_id;
        c.data.error = false;
      } else {
        c.data.error = true;
        c.data.errorMessage = response.message || "Something went wrong";
        c.data.success = false;
      }
    });
  };
}
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>create_new_booking</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Create New Booking </name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  var response = {};

  try {
    var gr = new GlideRecord('x_1804233_right_pr_right_prompt_travel_details');
    gr.initialize();
    gr.from = input.from;
    gr.destination = input.destination;
    gr.start_date = input.start_date;
    gr.return_date = input.return_date;
    gr.return = input.return ? true : false;
    gr.caller = input.caller ? input.caller.value : gs.getUserID(); // fallback to current user
    var sysId = gr.insert();

    response.success = true;
    response.sys_id = sysId;
  } catch (e) {
    response.success = false;
    response.message = e.message;
  }

  return response;
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-08-04 05:12:24</sys_created_on>
        <sys_id>8a8768d38307ea104ce4b329feaad30e</sys_id>
        <sys_mod_count>3</sys_mod_count>
        <sys_name>Create New Booking </sys_name>
        <sys_package display_value="Right Prompt Travel App" source="x_1804233_right_pr">c2f1413183766e104ce4b329feaad353</sys_package>
        <sys_policy/>
        <sys_scope display_value="Right Prompt Travel App">c2f1413183766e104ce4b329feaad353</sys_scope>
        <sys_update_name>sp_widget_8a8768d38307ea104ce4b329feaad30e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-08-04 05:30:41</sys_updated_on>
        <template><![CDATA[<div class="card p-4">
  <h3 class="mb-4">Travel Booking Form</h3>

  <div class="form-group">
    <label>From</label>
    <input type="text" ng-model="c.data.from" class="form-control" />
  </div>

  <div class="form-group">
    <label>Destination</label>
    <input type="text" ng-model="c.data.destination" class="form-control" />
  </div>

  <div class="form-group">
    <label>Start Date</label>
    <input type="date" ng-model="c.data.start_date" class="form-control" />
  </div>

  <div class="form-group">
    <label>Return Date</label>
    <input type="date" ng-model="c.data.return_date" class="form-control" />
  </div>

  <div class="form-group">
    <label>Return</label>
    <input type="checkbox" ng-model="c.data.return" />
  </div>


  <div class="form-group">
  <label>Caller</label>
  <sp-reference field="::c.callerField" />
</div>


  <button class="btn btn-primary mt-3" ng-click="c.submit()">Submit Booking</button>

  <div class="mt-3 text-success" ng-if="c.data.success">
    Travel request submitted successfully! <br> Request ID: {{c.data.sys_id}}
  </div>
  <div class="mt-3 text-danger" ng-if="c.data.error">
    {{c.data.errorMessage}}
  </div>
</div>
]]></template>
    </sp_widget>
</record_update>
